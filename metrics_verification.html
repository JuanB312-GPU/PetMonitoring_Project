<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetCare Monitor - Health Metrics Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8fafc;
        }
        .test-container {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .metric-example {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #2563eb;
        }
        .metric-title {
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 10px;
        }
        .metric-value {
            font-size: 1.5em;
            color: #2563eb;
            margin: 5px 0;
        }
        .metric-formula {
            font-size: 0.85em;
            color: #64748b;
            font-style: italic;
        }
        .test-case {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
        }
        .status-good { border-left-color: #22c55e; }
        .status-warning { border-left-color: #f59e0b; }
        .status-danger { border-left-color: #ef4444; }
        h1 { color: #2563eb; }
        h2 { color: #1e293b; }
    </style>
</head>
<body>
    <h1>üßÆ PetCare Monitor - Health Metrics Calculations</h1>
    
    <div class="test-container">
        <h2>üìä Sample Calculations for Test Pet</h2>
        <div class="test-case">
            <strong>Test Pet Profile:</strong><br>
            Name: Buddy<br>
            Species: Dog<br>
            Weight: 25 kg<br>
            Height: 60 cm<br>
            Age: 5 years<br>
            Conditions: None<br>
        </div>
        
        <div class="metric-example">
            <div class="metric-card status-good">
                <div class="metric-title">üèÉ‚Äç‚ôÇÔ∏è Body Mass Index (BMI)</div>
                <div class="metric-value" id="sample-bmi">-</div>
                <div class="metric-formula">Formula: weight (kg) / (height (m))¬≤</div>
                <div id="bmi-status">-</div>
            </div>
            
            <div class="metric-card status-good">
                <div class="metric-title">üìè Body Condition Score (BCS)</div>
                <div class="metric-value" id="sample-bcs">-</div>
                <div class="metric-formula">Scale: 1-9 (5 = ideal)</div>
                <div id="bcs-status">-</div>
            </div>
            
            <div class="metric-card status-good">
                <div class="metric-title">üçΩÔ∏è Daily Caloric Requirements (MER)</div>
                <div class="metric-value" id="sample-mer">-</div>
                <div class="metric-formula">Formula: RER √ó Activity Factor</div>
                <div id="mer-status">-</div>
            </div>
            
            <div class="metric-card status-good">
                <div class="metric-title">‚ö†Ô∏è Disease Risk Assessment</div>
                <div class="metric-value" id="sample-risk">-</div>
                <div class="metric-formula">Based on age, weight, conditions</div>
                <div id="risk-status">-</div>
            </div>
        </div>
    </div>

    <div class="test-container">
        <h2>üî¨ Calculation Formulas & Ranges</h2>
        
        <h3>BMI Calculation</h3>
        <p><strong>Formula:</strong> weight (kg) / (height (m))¬≤</p>
        <p><strong>Dog Ranges:</strong></p>
        <ul>
            <li>< 15: Underweight (Warning)</li>
            <li>15-25: Healthy Weight (Normal)</li>
            <li>25-30: Overweight (Warning)</li>
            <li>> 30: Obese (Danger)</li>
        </ul>
        <p><strong>Cat Ranges:</strong></p>
        <ul>
            <li>< 18: Underweight (Warning)</li>
            <li>18-27: Healthy Weight (Normal)</li>
            <li>27-32: Overweight (Warning)</li>
            <li>> 32: Obese (Danger)</li>
        </ul>

        <h3>Body Condition Score (BCS)</h3>
        <p><strong>Scale:</strong> 1-9 (5 being ideal)</p>
        <p><strong>Ranges:</strong></p>
        <ul>
            <li>‚â§ 3: Underweight (Warning)</li>
            <li>4-5: Ideal (Normal)</li>
            <li>6: Overweight (Warning)</li>
            <li>‚â• 7: Obese (Danger)</li>
        </ul>

        <h3>Metabolizable Energy Requirement (MER)</h3>
        <p><strong>Step 1 - RER (Resting Energy Requirement):</strong></p>
        <ul>
            <li>Weight < 2kg: 70 √ó (weight)^0.75</li>
            <li>Weight ‚â• 2kg: (30 √ó weight) + 70</li>
        </ul>
        <p><strong>Step 2 - Activity Factor:</strong></p>
        <ul>
            <li>Puppy/Kitten (< 1 year): 2.0</li>
            <li>Adult (1-7 years): 1.6</li>
            <li>Senior (> 7 years): 1.4</li>
        </ul>
        <p><strong>Final Formula:</strong> MER = RER √ó Activity Factor</p>

        <h3>Disease Risk Assessment</h3>
        <p><strong>Risk Factors:</strong></p>
        <ul>
            <li>Age > 7 years: +2 points</li>
            <li>Age > 3 years: +1 point</li>
            <li>Obese BMI: +3 points</li>
            <li>Overweight BMI: +1 point</li>
            <li>Each medical condition: +1 point</li>
        </ul>
        <p><strong>Risk Levels:</strong></p>
        <ul>
            <li>0-2 points: Low Risk (Normal)</li>
            <li>3-4 points: Moderate Risk (Warning)</li>
            <li>5+ points: High Risk (Danger)</li>
        </ul>
    </div>

    <div class="test-container">
        <h2>‚úÖ Functionality Verification</h2>
        
        <div class="test-case">
            <h3>Dashboard Metrics Display</h3>
            <p>‚úÖ BMI calculation with species-specific ranges</p>
            <p>‚úÖ BCS calculation on 1-9 scale</p>
            <p>‚úÖ MER calculation with age-adjusted activity factors</p>
            <p>‚úÖ Disease risk assessment with multiple factors</p>
            <p>‚úÖ Color-coded status indicators (Normal/Warning/Danger)</p>
        </div>

        <div class="test-case">
            <h3>Navigation Flow</h3>
            <p>‚úÖ Pet card click ‚Üí Navigate to Dashboard</p>
            <p>‚úÖ Pet selector in navbar ‚Üí Update metrics</p>
            <p>‚úÖ "View History" button ‚Üí Navigate to My Pets</p>
            <p>‚úÖ Dashboard, My Pets, Reports navigation</p>
        </div>

        <div class="test-case">
            <h3>My Pets Page Information</h3>
            <p>‚úÖ Basic identification data display</p>
            <p>‚úÖ Medical history with conditions</p>
            <p>‚úÖ Vaccination and deworming history</p>
            <p>‚úÖ Recent activities and feeding schedule</p>
            <p>‚úÖ Generate health report functionality</p>
        </div>

        <div class="test-case">
            <h3>Reports System</h3>
            <p>‚úÖ Report generation with current metrics</p>
            <p>‚úÖ Report storage and display</p>
            <p>‚úÖ Detailed report viewing</p>
            <p>‚úÖ Report download functionality</p>
        </div>

        <div class="test-case">
            <h3>Pet Selection System</h3>
            <p>‚úÖ Navbar pet selector dropdown</p>
            <p>‚úÖ Metrics update on pet selection</p>
            <p>‚úÖ Dashboard and My Pets sync</p>
            <p>‚úÖ Empty state handling</p>
        </div>
    </div>

    <script>
        // Sample calculation using the same formulas as the app
        const samplePet = {
            name: 'Buddy',
            species: 'dog',
            weight: 25,
            height: 60,
            birthdate: '2018-01-15',
            conditions: []
        };

        function calculateAge(birthdate) {
            const birth = new Date(birthdate);
            const now = new Date();
            return Math.floor((now - birth) / (1000 * 60 * 60 * 24 * 365));
        }

        function calculateBMI(pet) {
            const heightInM = pet.height / 100;
            const bmi = pet.weight / (heightInM * heightInM);
            
            let status, level;
            if (pet.species === 'dog') {
                if (bmi < 15) {
                    status = 'Underweight';
                    level = 'warning';
                } else if (bmi <= 25) {
                    status = 'Healthy Weight';
                    level = 'normal';
                } else if (bmi <= 30) {
                    status = 'Overweight';
                    level = 'warning';
                } else {
                    status = 'Obese';
                    level = 'danger';
                }
            }
            return { value: bmi.toFixed(1), status, level };
        }

        function calculateBCS(pet) {
            const bmi = pet.weight / ((pet.height / 100) * (pet.height / 100));
            let bcs;
            
            if (pet.species === 'dog') {
                if (bmi < 15) bcs = 3;
                else if (bmi <= 20) bcs = 4;
                else if (bmi <= 25) bcs = 5;
                else if (bmi <= 30) bcs = 6;
                else bcs = 7;
            }

            let status, level;
            if (bcs <= 3) {
                status = 'Underweight';
                level = 'warning';
            } else if (bcs <= 5) {
                status = 'Ideal';
                level = 'normal';
            } else if (bcs <= 6) {
                status = 'Overweight';
                level = 'warning';
            } else {
                status = 'Obese';
                level = 'danger';
            }

            return { value: `${bcs}/9`, status, level };
        }

        function calculateMER(pet) {
            let rer;
            if (pet.weight < 2) {
                rer = 70 * Math.pow(pet.weight, 0.75);
            } else {
                rer = (30 * pet.weight) + 70;
            }

            const age = calculateAge(pet.birthdate);
            let activityFactor = 1.6;
            
            if (age < 1) {
                activityFactor = 2.0;
            } else if (age > 7) {
                activityFactor = 1.4;
            }

            const mer = rer * activityFactor;
            return { value: Math.round(mer), status: 'Daily requirement', level: 'info' };
        }

        function assessDiseaseRisk(pet) {
            const age = calculateAge(pet.birthdate);
            const bmi = pet.weight / ((pet.height / 100) * (pet.height / 100));
            
            let riskScore = 0;
            
            if (age > 7) riskScore += 2;
            else if (age > 3) riskScore += 1;
            
            if (pet.species === 'dog') {
                if (bmi > 30) riskScore += 3;
                else if (bmi > 25) riskScore += 1;
            }
            
            riskScore += pet.conditions.length;
            
            let level, status, riskLevel;
            if (riskScore <= 2) {
                level = 'Low';
                status = 'Low risk profile';
                riskLevel = 'normal';
            } else if (riskScore <= 4) {
                level = 'Moderate';
                status = 'Monitor closely';
                riskLevel = 'warning';
            } else {
                level = 'High';
                status = 'Requires attention';
                riskLevel = 'danger';
            }

            return { level, status, riskLevel };
        }

        // Calculate and display sample metrics
        const bmi = calculateBMI(samplePet);
        const bcs = calculateBCS(samplePet);
        const mer = calculateMER(samplePet);
        const risk = assessDiseaseRisk(samplePet);

        document.getElementById('sample-bmi').textContent = bmi.value;
        document.getElementById('bmi-status').textContent = bmi.status;

        document.getElementById('sample-bcs').textContent = bcs.value;
        document.getElementById('bcs-status').textContent = bcs.status;

        document.getElementById('sample-mer').textContent = mer.value + ' kcal';
        document.getElementById('mer-status').textContent = mer.status;

        document.getElementById('sample-risk').textContent = risk.level;
        document.getElementById('risk-status').textContent = risk.status;
    </script>
</body>
</html>
